#This file is part of Vulture OS.
#

########################## WARNING ###############################
# Don't edit this file, it is automatically generated by Vulture #
########################## WARNING ###############################

filebeat.inputs:
# Create a 'fake' entry to have at least a working input
- type: unix
  max_message_size: 10MiB
  path: "/var/run/filebeat-input.sock"

{% for frontend in frontends -%}
{{ frontend.generate_filebeat_conf("input") }}
{% endfor %}

filebeat.modules:
{% for frontend in frontends -%}
{{ frontend.generate_filebeat_conf("module") }}
{% endfor %}

output.redis:
  hosts: [ "redis://{{jail_addresses['redis']['inet']}}:6379", {%- for n in nodes -%}"redis://{{node.management_ip}}:6379"{%- if not loop.last -%},{%- endif -%}{%- endfor -%}]
  # FIXME: Generate a redis password for the cluster
  # password: "XXX"
  key: "%{[fields.filebeat_queue]:{{node.name}}}"
  datatype: list
  db: 0
  backoff.init: 1
  backoff.max: 60
  bulk_max_size: 2048
  timeout: 5

