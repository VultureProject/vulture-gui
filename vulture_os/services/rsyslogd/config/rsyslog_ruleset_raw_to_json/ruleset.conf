#This file is part of Vulture OS.
#

########################## WARNING ###############################
# Don't edit this file, it is automatically generated by Vulture #
########################## WARNING ###############################


{{ frontend.pre_ruleset }}

ruleset(name="{{ frontend.ruleset_name }}_outputs" queue.type="Direct") {
    {{ frontend.log_condition|indent(4, false) }}
}

ruleset(name="{{ frontend.ruleset_name }}_outputs_garbage" queue.type="Direct") {
    {{ frontend.log_condition_failure|indent(4, false) }}
}

{% if frontend.rendered_custom_actions -%}
ruleset(name="{{ frontend.ruleset_name }}_custom_actions" queue.type="Direct") {
    {{ frontend.rendered_custom_actions|indent(4, false) }}
}
{%- endif %}

ruleset(name="{{ frontend.ruleset_name }}" {{ frontend.ruleset_options|safe }}) {

    set $!frontend_name = "{{frontend.name}}";
    set $!tenants_name = "{{frontend.tenants_config.name}}";

    {% if frontend.rendered_custom_actions %}call {{ frontend.ruleset_name }}_custom_actions{% endif %}

    {% include "rsyslog_darwin/ruleset.conf" %}

    call {{ frontend.ruleset_name }}_outputs
    stop

}
